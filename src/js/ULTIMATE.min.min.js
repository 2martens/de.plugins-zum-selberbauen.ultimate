(function(d,f){var e=d.fn.empty;d.fn.empty=function(){d(this).triggerHandler("empty");return e.call(d(this));};})(jQuery);(function(d,c){d.extend(d.ui.resizable,{_propagate:function(a,b){a.call(this,[b,this.ui()]);(a!="resize"&&this._trigger(a,b,this.ui()));}});});var ULTIMATE={};ULTIMATE.Date={};ULTIMATE.Date.Picker={_dateFormat:"yy-mm-dd",_timeFormat:"g:ia",init:function(){var b=$.timepicker.log;$.timepicker.log=function(a){if(a.indexOf("Error parsing the date/time string: Unexpected literal at position")==-1){b(a);}};this._convertDateFormat();this._initDatePicker();WCF.DOMNodeInsertedHandler.addCallback("ULTIMATE.Date.Picker",$.proxy(this._initDatePicker,this));},_convertDateFormat:function(){var b={a:" tt",A:" TT",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"l",d:"dd",D:"D",j:"d",l:"DD",z:"o",S:"",F:"MM",m:"mm",M:"M",n:"m",o:"yy",Y:"yy",y:"y",U:"@"};this._dateFormat=WCF.Language.get("wcf.date.dateFormat").replace(/([^dDjlzSFmMnoYyU\\]*(?:\\.[^dDjlzSFmMnoYyU\\]*)*)([dDjlzSFmMnoYyU])/g,function(l,i,j,h,a){for(var k in b){if(j==k){j=b[k];}}return i+j;});this._timeFormat=WCF.Language.get("wcf.date.timeFormat").replace(/([^aAgGhHisu\\]*(?:\\.[^aAgGhHisu\\]*)*)([aAgGhHisu])/g,function(l,i,j,h,a){for(var k in b){if(j==k){j=b[k];}}return i+j;});},_initDatePicker:function(){$("input[type=date]:not(.jsDatePicker)").each($.proxy(function(j,f){var h=$(f);var g=h.prop("name");var i=h.val();h.prop("type","text").addClass("jsDatePicker");if(h.data("placeholder")){h.attr("placeholder",h.data("placeholder"));}h.removeAttr("name");h.before('<input type="hidden" id="'+h.wcfIdentify()+'DatePicker" name="'+g+'" value="'+i+'" />');h.datepicker({altField:"#"+h.wcfIdentify()+"DatePicker",altFormat:"yy-mm-dd",beforeShow:function(a,b){setTimeout(function(){b.dpDiv.position({my:"left top",at:"left bottom",collision:"none",of:a});},1);},changeMonth:true,changeYear:true,dateFormat:this._dateFormat,dayNames:WCF.Language.get("__days"),dayNamesMin:WCF.Language.get("__daysShort"),dayNamesShort:WCF.Language.get("__daysShort"),monthNames:WCF.Language.get("__months"),monthNamesShort:WCF.Language.get("__monthsShort"),showOtherMonths:true,yearRange:(h.hasClass("birthday")?"-100:+0":"1900:2038"),onClose:function(a,b){if(a==""){$(b.settings.altField).val(a);}}});if(i){h.datepicker("setDate",new Date(i));}h.datepicker("widget").hide();},this));$("input[type=datetime]:not(.jsDatePicker)").each($.proxy(function(r,m){var n=$(m);var s=n.prop("name");var l=n.val();if(/[0-9]{2}:[0-9]{2}:[0-9]{2}$/.test(l)){l=l.replace(/:[0-9]{2}$/,"");n.val(l);}if(/^[0-9]{2}\.[0-9]{2}\.[0-9]{4}/.test(l)){var k=/[0-9]{4}/.exec(l);var p=k[0];k=/\.(0[1-9]|1[0-2])\./.exec(l);var q=k[1];k=/^[0-9]{2}/.exec(l);var o=k[0];k=/[0-9]{2}:[0-9]{2}$/.exec(l);var t=k[0];l=p+"-"+q+"-"+o+"T"+t+":00";}n.prop("type","text").addClass("jsDatePicker");n.removeAttr("name");n.before('<input type="hidden" id="'+n.wcfIdentify()+'DatePicker" name="'+s+'" value="'+l+'" />');n.datetimepicker({altField:"#"+n.wcfIdentify()+"DatePicker",altFieldTimeOnly:false,altFormat:"yy-mm-dd",altTimeFormat:"HH:mm",beforeShow:function(a,b){setTimeout(function(){b.dpDiv.position({my:"left top",at:"left bottom",collision:"none",of:a});},1);},changeMonth:true,changeYear:true,controlType:"select",dateFormat:this._dateFormat,dayNames:WCF.Language.get("__days"),dayNamesMin:WCF.Language.get("__daysShort"),dayNamesShort:WCF.Language.get("__daysShort"),hourText:WCF.Language.get("wcf.date.hour"),minuteText:WCF.Language.get("wcf.date.minute"),monthNames:WCF.Language.get("__months"),monthNamesShort:WCF.Language.get("__monthsShort"),showButtonPanel:false,showTime:false,showOtherMonths:true,timeFormat:this._timeFormat,yearRange:(n.hasClass("birthday")?"-100:+0":"1900:2038"),onClose:function(a,b){if(a==""){$(b.settings.altField).val("");}}});if(l){n.removeClass("hasDatepicker").datetimepicker("setDate",new Date(l));}n.datepicker("widget").hide();},this));}};ULTIMATE.JSON={init:function(){},encode:function(l){var j=typeof l;var k=this;if(l instanceof Array){var h="[";var g=0;var i=l.length;$.each(l,function(b,a){if(g>0&&g<i){h+=",";}if(a instanceof Array||typeof a=="object"){h+=k.encode(a);}h+='"'+a+'"';g++;});h+="]";return h;}else{if(j=="object"){var h="{";var g=0;var i=$.getLength(l);$.each(l,function(c,b){if(g>0&&g<i){h+=",";}h+='"'+c+'":';var a=typeof b;if(b instanceof Array){h+=k.encode(b);}else{if(a=="object"){h+=k.encode(b);}else{if(a=="string"){h+='"'+b+'"';}}}g++;});h+="}";return h;}}return null;}};ULTIMATE.Permission={_variables:new WCF.Dictionary(),add:function(d,c){this._variables.add(d,c);},addObject:function(b){this._variables.addObject(b);},get:function(d){var c=this._variables.get(d);if(c===null){return d;}return c;}};ULTIMATE.NestedSortable={};ULTIMATE.NestedSortable.Delete=WCF.Action.Delete.extend({triggerEffect:function(h){for(var f in this._containers){var g=$("#"+this._containers[f]);if(WCF.inArray(g.find(".jsDeleteButton").data("objectID"),h)){if(g.has("ol").has("li")){var e=g.find("> ol");g.before(e.contents());e.contents().detach();g.remove();}else{g.wcfBlindOut("up",function(){g.remove();});}}}}});